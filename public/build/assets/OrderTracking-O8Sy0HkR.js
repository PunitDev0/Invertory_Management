import{j as e,r as o,a as ye,y as D}from"./app-CDXLu-GJ.js";import{L as fe}from"./Layout-D7AHczjC.js";import{C as A,a as q}from"./card-xLjzpY4B.js";import{B as Z}from"./badge-miXYYRKu.js";import{c as p,b as Ne,I as i,B as I}from"./index-2cjrtonQ.js";import{T as ve,a as _e,b as te,c as u,d as be,e as j}from"./table-BhV6vGMM.js";import{L as d}from"./label-BUSBkf3v.js";import{S as we,e as Se,g as ke,i as Ce,j as J}from"./select-49C4muWv.js";import{c as $,S as Pe,U as De,J as Oe}from"./navbar-D021pViQ.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ae=$("Calendar",Ee);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Te=$("ChevronLeft",Fe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Le=$("ChevronRight",ze);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],c=$("IndianRupee",Ue),ne=({className:x,...m})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:p("mx-auto flex w-full justify-center",x),...m});ne.displayName="Pagination";const re=o.forwardRef(({className:x,...m},n)=>e.jsx("ul",{ref:n,className:p("flex flex-row items-center gap-1",x),...m}));re.displayName="PaginationContent";const M=o.forwardRef(({className:x,...m},n)=>e.jsx("li",{ref:n,className:p("",x),...m}));M.displayName="PaginationItem";const B=({className:x,isActive:m,size:n="icon",...y})=>e.jsx("a",{"aria-current":m?"page":void 0,className:p(Ne({variant:m?"outline":"ghost",size:n}),x),...y});B.displayName="PaginationLink";const le=({className:x,...m})=>e.jsxs(B,{"aria-label":"Go to previous page",size:"default",className:p("gap-1 pl-2.5",x),...m,children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});le.displayName="PaginationPrevious";const ie=({className:x,...m})=>e.jsxs(B,{"aria-label":"Go to next page",size:"default",className:p("gap-1 pr-2.5",x),...m,children:[e.jsx("span",{children:"Next"}),e.jsx(Le,{className:"h-4 w-4"})]});ie.displayName="PaginationNext";const Ae=ye.create({baseURL:"",headers:{"Content-Type":"application/json"}});function Ie({userorders:x,onUpdateOrder:m}){const[n,y]=o.useState(null),[b,w]=o.useState(""),[O,de]=o.useState(""),[S,ce]=o.useState("all"),[k,me]=o.useState(""),[N,oe]=o.useState(1),[R,H]=o.useState(!1),[E,F]=o.useState(!1),[t,Y]=o.useState(null),[K,xe]=o.useState([]),T=10;o.useEffect(()=>{(async()=>{try{const a=await Ae.get("/expenses");if(a.data.success)xe(a.data.data);else throw new Error(a.data.message||"Failed to fetch expenses")}catch(a){console.error("Error fetching expenses:",a),D.error("Failed to load expenses")}})()},[]);const G=s=>{const a={...s,created_at_date:s.created_at?new Date(s.created_at).toISOString().split("T")[0]:"",created_at_time:s.created_at?new Date(s.created_at).toLocaleTimeString("en-US",{hour12:!1}).slice(0,5):"12:00",delivered_date_date:s.delivered_date?new Date(s.delivered_date).toISOString().split("T")[0]:"",delivered_date_time:s.delivered_date?new Date(s.delivered_date).toLocaleTimeString("en-US",{hour12:!1}).slice(0,5):"12:00",pickup_time_date:s.pickup_time?new Date(s.pickup_time).toISOString().split("T")[0]:"",pickup_time_time:s.pickup_time?new Date(s.pickup_time).toLocaleTimeString("en-US",{hour12:!1}).slice(0,5):"12:00"};y(s),Y(a),H(!1),F(!1)},he=()=>{y(null),H(!1),F(!1)},ge=()=>{H(!R)},pe=()=>{F(!E)},Q=(s,a,r)=>{if(!s||!a)return null;const[l,_]=a.split(":");let g=parseInt(l);const L=parseInt(_);r==="PM"&&g<12?g+=12:r==="AM"&&g===12&&(g=0);const U=new Date(s);return U.setHours(g,L,0,0),`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}-${String(U.getDate()).padStart(2,"0")} ${String(g).padStart(2,"0")}:${String(L).padStart(2,"0")}:00`},h=(s,a)=>{Y(r=>{const l={...r,[s]:a};if(s==="total_amount"||s==="paid_payment"){const _=parseFloat(l.total_amount)||0,g=parseFloat(l.paid_payment)||0;l.pending_payment=(_-g).toFixed(2)}return l})},ue=async()=>{var s,a;try{const r={user_email:t.user_email,user_phone:t.user_phone,user_address:t.user_address,user_city:t.user_city,user_zip:t.user_zip,billing_number:t.billing_number,created_at:Q(t.created_at_date,t.created_at_time,t.created_at_period),shipping_address:t.shipping_address,delivered_date:Q(t.delivered_date_date,t.delivered_date_time,t.delivered_date_period),pickup_time:Q(t.pickup_time_date,t.pickup_time_time,t.pickup_time_period),total_amount:parseFloat(t.total_amount),paid_payment:parseFloat(t.paid_payment),pending_payment:parseFloat(t.pending_payment)};if(r.delivered_date<r.pickup_time){D.error("Delivered date cannot be before pickup time");return}const l=await De(t.id,r);if(l)m&&m(l.data),y(l.data),F(!1),D.success("Order updated successfully");else throw new Error(l.message||"Failed to update order")}catch(r){if(console.error("Error in handleSaveChanges:",r),(a=(s=r.response)==null?void 0:s.data)!=null&&a.errors){const l=Object.values(r.response.data.errors).flat().join(`
`);D.error(`Validation failed:
${l}`)}else D.error(`Failed to update order: ${r.message}`)}},f=s=>s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",v=s=>s?new Date(s).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"",C=s=>s?`${f(s)} ${v(s)}`:"N/A",z=s=>K.filter(r=>r.order_id.toString()===s.toString()).reduce((r,l)=>Array.isArray(l.expenses)?r+l.expenses.reduce((_,g)=>_+parseFloat(g.amount||0),0):r,0).toFixed(2),W=s=>K.filter(a=>a.order_id.toString()===s.toString()),P=o.useMemo(()=>x.slice().sort((s,a)=>new Date(a.created_at)-new Date(s.created_at)).filter(s=>{const a=new Date(s.created_at),r=b?new Date(b):null,l=O?new Date(O):null,_=(!r||a>=r)&&(!l||a<=l),g=S==="all"||S==="pending"&&s.pending_payment!=="0.00"||S==="paid"&&s.pending_payment==="0.00",L=k===""||s.id.toString().includes(k)||s.user_name.toLowerCase().includes(k.toLowerCase());return _&&g&&L}),[x,b,O,S,k]),X=P.slice(0,9),ee=N*T,je=ee-T,se=P.slice(je,ee),V=s=>oe(s);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 flex flex-col items-center bg-gradient-to-b from-gray-100 to-gray-200 min-h-screen",children:[e.jsx(A,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white mb-8 transform transition-all hover:scale-[1.01]",children:e.jsxs(q,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-gray-900 tracking-tight",children:"Filter Orders"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"startDate",className:"text-sm font-medium text-gray-700",children:"Start Date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(i,{id:"startDate",type:"date",value:b,onChange:s=>w(s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"endDate",className:"text-sm font-medium text-gray-700",children:"End Date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(i,{id:"endDate",type:"date",value:O,onChange:s=>de(s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(we,{onValueChange:ce,value:S,className:"mt-1",children:[e.jsx(Se,{id:"status",className:"w-full border-gray-300 rounded-lg shadow-sm",children:e.jsx(ke,{placeholder:"Select status"})}),e.jsxs(Ce,{children:[e.jsx(J,{value:"all",children:"All"}),e.jsx(J,{value:"pending",children:"Pending"}),e.jsx(J,{value:"paid",children:"Paid"})]})]})]}),e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx(d,{htmlFor:"search",className:"text-sm font-medium text-gray-700",children:"Search"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(i,{id:"search",type:"text",placeholder:"Search by Order ID or User Name",value:k,onChange:s=>me(s.target.value),className:"w-full pl-10 border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(Pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]})]})]})}),e.jsx(A,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white mb-8 transform transition-all hover:scale-[1.01]",children:e.jsxs(q,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-center text-gray-900 tracking-tight",children:"Recent Orders (Top 9)"}),X.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No orders found"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(s=>e.jsxs("div",{className:"cursor-pointer p-5 border border-gray-200 rounded-xl bg-white shadow-md hover:shadow-lg hover:bg-gray-50 transition-all duration-300",onClick:()=>G(s),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",s.user_name]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Ordered: ",f(s.created_at)," ",v(s.created_at)]}),s.delivered_date&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Delivered: ",C(s.delivered_date)]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Booking:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(c,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.total_amount})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(c,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.paid_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(c,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.pending_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Total Expenses:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(c,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:z(s.id)})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(Z,{className:p("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]})]},s.id))})]})}),e.jsx(A,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white transform transition-all hover:scale-[1.01]",children:e.jsxs(q,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-center text-gray-900 tracking-tight",children:"All User Orders"}),P.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No orders found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:hidden grid grid-cols-1 gap-6",children:se.map(s=>e.jsxs("div",{className:"cursor-pointer p-5 border border-gray-200 rounded-xl bg-white shadow-md hover:shadow-lg hover:bg-gray-50 transition-all duration-300",onClick:()=>G(s),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",s.user_name]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Ordered: ",f(s.created_at)," ",v(s.created_at)]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Delivered: ",C(s.delivered_date)||"N/A"]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Booking:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(c,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.total_amount})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(c,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.paid_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(c,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.pending_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Total Expenses:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(c,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:z(s.id)})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(Z,{className:p("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]})]},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs(ve,{className:"min-w-full",children:[e.jsx(_e,{children:e.jsxs(te,{className:"bg-gray-100",children:[e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Order ID"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"User"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Order Date"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Delivered Date"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Total"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Paid"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Pending"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Expenses"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Status"})]})}),e.jsx(be,{children:se.map(s=>e.jsxs(te,{className:"cursor-pointer hover:bg-gray-50 transition-colors text-xs sm:text-sm border-b",onClick:()=>G(s),children:[e.jsx(j,{className:"font-medium",children:s.id}),e.jsx(j,{children:s.user_name}),e.jsxs(j,{children:[f(s.created_at)," ",v(s.created_at)]}),e.jsx(j,{children:C(s.delivered_date)||"N/A"}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{size:14,className:"text-gray-600"}),s.total_amount]})}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{size:14,className:"text-gray-600"}),s.paid_payment]})}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{size:14,className:"text-gray-600"}),s.pending_payment]})}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{size:14,className:"text-gray-600"}),z(s.id)]})}),e.jsx(j,{children:e.jsx(Z,{className:p("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]},s.id))})]})}),e.jsx(ne,{className:"mt-6",children:e.jsxs(re,{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(M,{children:e.jsx(le,{onClick:()=>V(N-1),disabled:N===1,className:"hover:bg-gray-200 rounded-lg"})}),Array.from({length:Math.ceil(P.length/T)},(s,a)=>e.jsx(M,{children:e.jsx(B,{onClick:()=>V(a+1),isActive:N===a+1,className:p("px-3 py-1 rounded-lg",N===a+1?"bg-blue-500 text-white":"hover:bg-gray-200"),children:a+1})},a+1)),e.jsx(M,{children:e.jsx(ie,{onClick:()=>V(N+1),disabled:N===Math.ceil(P.length/T),className:"hover:bg-gray-200 rounded-lg"})})]})})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 sm:p-6 animate-fade-in",children:e.jsxs(A,{className:"w-full max-w-lg sm:max-w-2xl bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-white z-10 pb-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold text-gray-900 tracking-tight",children:"Order Details"}),e.jsx(I,{onClick:pe,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md",children:E?"Cancel Edit":"Edit Order"})]}),e.jsxs("div",{className:"space-y-4 text-sm sm:text-base text-gray-700",children:[E?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(d,{children:"ID:"}),e.jsx(i,{value:t.id,disabled:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Billing Number:"}),e.jsx(i,{value:t.billing_number||"",onChange:s=>h("billing_number",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Name:"}),e.jsx(i,{value:t.user_name,disabled:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Order Date:"}),e.jsxs("div",{className:"mt-1 flex flex-col gap-2",children:[e.jsx(i,{type:"date",value:t.created_at_date,onChange:s=>h("created_at_date",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(i,{type:"time",value:t.created_at_time,onChange:s=>h("created_at_time",s.target.value),className:"flex-1 border-gray-300 rounded-lg shadow-sm"})})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Email:"}),e.jsx(i,{value:t.user_email,onChange:s=>h("user_email",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Phone:"}),e.jsx(i,{value:t.user_phone,onChange:s=>h("user_phone",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Address:"}),e.jsx(i,{value:t.user_address,onChange:s=>h("user_address",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User City:"}),e.jsx(i,{value:t.user_city,onChange:s=>h("user_city",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Zip:"}),e.jsx(i,{value:t.user_zip,onChange:s=>h("user_zip",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Shipping Address:"}),e.jsx(i,{value:t.shipping_address,onChange:s=>h("shipping_address",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Delivered Date:"}),e.jsxs("div",{className:"mt-1 flex flex-col gap-2",children:[e.jsx(i,{type:"date",value:t.delivered_date_date,onChange:s=>h("delivered_date_date",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(i,{type:"time",value:t.delivered_date_time,onChange:s=>h("delivered_date_time",s.target.value),className:"flex-1 border-gray-300 rounded-lg shadow-sm"})})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Pickup Date:"}),e.jsxs("div",{className:"mt-1 flex flex-col gap-2",children:[e.jsx(i,{type:"date",value:t.pickup_time_date,onChange:s=>h("pickup_time_date",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(i,{type:"time",value:t.pickup_time_time,onChange:s=>h("pickup_time_time",s.target.value),className:"flex-1 border-gray-300 rounded-lg shadow-sm"})})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Total Amount:"}),e.jsx(i,{type:"number",step:"0.01",value:t.total_amount,onChange:s=>h("total_amount",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Paid Payment:"}),e.jsx(i,{type:"number",step:"0.01",value:t.paid_payment,onChange:s=>h("paid_payment",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Pending Payment:"}),e.jsx(i,{type:"number",step:"0.01",value:t.pending_payment,disabled:!0,className:"mt-1 bg-gray-100 cursor-not-allowed"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," ",n.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Billing No:"})," ",n.billing_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Name:"})," ",n.user_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Order Date:"})," ",f(n.created_at)," ",v(n.created_at)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Email:"})," ",n.user_email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Phone:"})," ",n.user_phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Address:"})," ",n.user_address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User City:"})," ",n.user_city]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Zip:"})," ",n.user_zip]}),e.jsxs("p",{className:"text-cyan-700",children:[e.jsx("strong",{children:"Shipping Add:"})," ",n.shipping_address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Delivered Date:"})," ",C(n.delivered_date)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pickup Date:"})," ",C(n.pickup_time)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Updated At:"})," ",f(n.updated_at)," ",v(n.updated_at)]}),e.jsxs("div",{className:"flex items-center text-yellow-600 font-bold",children:[e.jsx("strong",{children:"Total Amount:"}),e.jsx(c,{size:16,className:"mx-2"}),e.jsx("span",{children:n.total_amount})]}),e.jsxs("div",{className:"flex items-center text-green-400 font-bold",children:[e.jsx("strong",{children:"Paid Payment:"}),e.jsx(c,{size:16,className:"mx-2"}),e.jsx("span",{children:n.paid_payment})]}),e.jsxs("div",{className:"flex items-center text-red-400 font-bold",children:[e.jsx("strong",{children:"Pending Payment:"}),e.jsx(c,{size:16,className:"mx-2"}),e.jsx("span",{children:n.pending_payment})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{children:"Total Expenses:"}),e.jsx(c,{size:16,className:"mx-2"}),e.jsx("span",{children:z(n.id)})]}),e.jsx("p",{children:e.jsx("strong",{children:"Products:"})}),e.jsx("ul",{className:"list-disc pl-6 space-y-2",children:n.products.map((s,a)=>e.jsxs("li",{children:[e.jsx("strong",{children:"Name:"})," ",s.product_name,", ",e.jsx("strong",{children:"Qty:"})," ",s.quantity,","," ",e.jsx("strong",{children:"Price:"})," ",e.jsx(c,{size:14,className:"inline"}),s.product_price]},a))}),W(n.id).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold mt-4",children:"Expenses:"}),e.jsx("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200",children:e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("ul",{className:"list-disc pl-6 space-y-3",children:W(n.id).map((s,a)=>s.expenses.map((r,l)=>e.jsxs("li",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",r.type||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",e.jsx(c,{size:14,className:"inline"}),e.jsx("span",{children:parseFloat(r.amount||0).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",f(s.expense_date)||"N/A"]})]},`${a}-${l}`)))})})})]})]}),n.payment_logs&&n.payment_logs.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(I,{onClick:ge,className:"mt-6 w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md",children:R?"Hide Payment Logs":`See Payment Logs (${n.payment_logs.length})`}),R&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200",children:[e.jsx("p",{className:"font-semibold mb-3",children:"Payment Logs:"}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("ul",{className:"list-disc pl-6 space-y-3",children:n.payment_logs.map((s,a)=>e.jsxs("li",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Payment ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",e.jsx(c,{size:14,className:"inline"}),e.jsx("span",{children:s.payment_amount})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",f(s.created_at)," ",v(s.created_at)]})]},a))})})]})]})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex justify-end sticky bottom-0 gap-2",children:[E&&e.jsx(I,{onClick:ue,className:"bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md",children:"Save Changes"}),e.jsx(I,{onClick:he,className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg shadow-md",children:"Close"})]})]})})]})}function Ze(){const[x,m]=o.useState([]),[n,y]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{const w=await Oe();m(w),y(!1)}catch(w){console.error("Error fetching orders:",w),y(!1)}})()},[]),e.jsx(fe,{children:e.jsx(Ie,{userorders:x})})}export{Ze as default};
