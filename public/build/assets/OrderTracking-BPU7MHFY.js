import{j as e,r}from"./app-D3aeoW-Y.js";import{L as ae}from"./Layout-DO02JvZ8.js";import{c as d,h as ne,C as f,a as S,I as O,B}from"./index-vPo6H25N.js";import{B as L}from"./badge-BVMitCoy.js";import{T as le,a as re,b as R,c as o,d as ie,e as h}from"./table-C69F_mpN.js";import{L as b}from"./label-BI5oShzx.js";import{S as de,e as ce,g as xe,i as me,j as z}from"./select-DfJvEU09.js";import{c as w,S as oe,V as E}from"./navbar-DswSfuXp.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],G=w("Calendar",he);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],je=w("ChevronLeft",ge);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pe=w("ChevronRight",ue);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],l=w("IndianRupee",ye),V=({className:a,...t})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:d("mx-auto flex w-full justify-center",a),...t});V.displayName="Pagination";const $=r.forwardRef(({className:a,...t},c)=>e.jsx("ul",{ref:c,className:d("flex flex-row items-center gap-1",a),...t}));$.displayName="PaginationContent";const v=r.forwardRef(({className:a,...t},c)=>e.jsx("li",{ref:c,className:d("",a),...t}));v.displayName="PaginationItem";const _=({className:a,isActive:t,size:c="icon",...x})=>e.jsx("a",{"aria-current":t?"page":void 0,className:d(ne({variant:t?"outline":"ghost",size:c}),a),...x});_.displayName="PaginationLink";const H=({className:a,...t})=>e.jsxs(_,{"aria-label":"Go to previous page",size:"default",className:d("gap-1 pl-2.5",a),...t,children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});H.displayName="PaginationPrevious";const Q=({className:a,...t})=>e.jsxs(_,{"aria-label":"Go to next page",size:"default",className:d("gap-1 pr-2.5",a),...t,children:[e.jsx("span",{children:"Next"}),e.jsx(pe,{className:"h-4 w-4"})]});Q.displayName="PaginationNext";function Ne({userorders:a}){const[t,c]=r.useState(null),[x,T]=r.useState(""),[m,q]=r.useState(""),[u,Z]=r.useState("all"),[p,J]=r.useState(""),[g,K]=r.useState(1),[P,k]=r.useState(!1),N=10,D=s=>{c(s),k(!1)},W=()=>{c(null),k(!1)},X=()=>{k(!P)},i=s=>s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",j=s=>s?new Date(s).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"",y=r.useMemo(()=>a.slice().sort((s,n)=>new Date(n.created_at)-new Date(s.created_at)).filter(s=>{const n=new Date(s.created_at),A=x?new Date(x):null,M=m?new Date(m):null,ee=(!A||n>=A)&&(!M||n<=M),se=u==="all"||u==="pending"&&s.pending_payment!=="0.00"||u==="paid"&&s.pending_payment==="0.00",te=p===""||s.id.toString().includes(p)||s.user_name.toLowerCase().includes(p.toLowerCase());return ee&&se&&te}),[a,x,m,u,p]),F=y.slice(0,9),I=g*N,Y=I-N,U=y.slice(Y,I),C=s=>K(s);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 flex flex-col items-center bg-gradient-to-b from-gray-100 to-gray-200 min-h-screen",children:[e.jsx(f,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white mb-8 transform transition-all hover:scale-[1.01]",children:e.jsxs(S,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-gray-900 tracking-tight",children:"Filter Orders"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"startDate",className:"text-sm font-medium text-gray-700",children:"Start Date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(O,{id:"startDate",type:"date",value:x,onChange:s=>T(s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(G,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"endDate",className:"text-sm font-medium text-gray-700",children:"End Date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(O,{id:"endDate",type:"date",value:m,onChange:s=>q(s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(G,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(de,{onValueChange:Z,value:u,className:"mt-1",children:[e.jsx(ce,{id:"status",className:"w-full border-gray-300 rounded-lg shadow-sm",children:e.jsx(xe,{placeholder:"Select status"})}),e.jsxs(me,{children:[e.jsx(z,{value:"all",children:"All"}),e.jsx(z,{value:"pending",children:"Pending"}),e.jsx(z,{value:"paid",children:"Paid"})]})]})]}),e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx(b,{htmlFor:"search",className:"text-sm font-medium text-gray-700",children:"Search"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(O,{id:"search",type:"text",placeholder:"Search by Order ID or User Name",value:p,onChange:s=>J(s.target.value),className:"w-full pl-10 border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]})]})]})}),e.jsx(f,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white mb-8 transform transition-all hover:scale-[1.01]",children:e.jsxs(S,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-center text-gray-900 tracking-tight",children:"Recent Orders (Top 9)"}),F.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No orders found"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(s=>e.jsxs("div",{className:"cursor-pointer p-5 border border-gray-200 rounded-xl bg-white shadow-md hover:shadow-lg hover:bg-gray-50 transition-all duration-300",onClick:()=>D(s),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",s.user_name]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Ordered: ",i(s.created_at)," ",j(s.created_at)]}),s.delivered_date&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Delivered: ",i(s.delivered_date)]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Booking:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.total_amount})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.paid_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.pending_payment})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(L,{className:d("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]})]},s.id))})]})}),e.jsx(f,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white transform transition-all hover:scale-[1.01]",children:e.jsxs(S,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-center text-gray-900 tracking-tight",children:"All User Orders"}),y.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No orders found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:hidden grid grid-cols-1 gap-6",children:U.map(s=>e.jsxs("div",{className:"cursor-pointer p-5 border border-gray-200 rounded-xl bg-white shadow-md hover:shadow-lg hover:bg-gray-50 transition-all duration-300",onClick:()=>D(s),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",s.user_name]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Ordered: ",i(s.created_at)," ",j(s.created_at)]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Delivered: ",i(s.delivered_date)||"N/A"]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Booking:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.total_amount})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.paid_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.pending_payment})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(L,{className:d("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]})]},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs(le,{className:"min-w-full",children:[e.jsx(re,{children:e.jsxs(R,{className:"bg-gray-100",children:[e.jsx(o,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Order ID"}),e.jsx(o,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"User"}),e.jsx(o,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Order Date"}),e.jsx(o,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Delivered Date"}),e.jsx(o,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Total"}),e.jsx(o,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Paid"}),e.jsx(o,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Pending"}),e.jsx(o,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Status"})]})}),e.jsx(ie,{children:U.map(s=>e.jsxs(R,{className:"cursor-pointer hover:bg-gray-50 transition-colors text-xs sm:text-sm border-b",onClick:()=>D(s),children:[e.jsx(h,{className:"font-medium",children:s.id}),e.jsx(h,{children:s.user_name}),e.jsxs(h,{children:[i(s.created_at)," ",j(s.created_at)]}),e.jsx(h,{children:i(s.delivered_date)||"N/A"}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{size:14,className:"text-gray-600"}),s.total_amount]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{size:14,className:"text-gray-600"}),s.paid_payment]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{size:14,className:"text-gray-600"}),s.pending_payment]})}),e.jsx(h,{children:e.jsx(L,{className:d("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]},s.id))})]})}),e.jsx(V,{className:"mt-6",children:e.jsxs($,{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(v,{children:e.jsx(H,{onClick:()=>C(g-1),disabled:g===1,className:"hover:bg-gray-200 rounded-lg"})}),Array.from({length:Math.ceil(y.length/N)},(s,n)=>e.jsx(v,{children:e.jsx(_,{onClick:()=>C(n+1),isActive:g===n+1,className:d("px-3 py-1 rounded-lg",g===n+1?"bg-blue-500 text-white":"hover:bg-gray-200"),children:n+1})},n+1)),e.jsx(v,{children:e.jsx(Q,{onClick:()=>C(g+1),disabled:g===Math.ceil(y.length/N),className:"hover:bg-gray-200 rounded-lg"})})]})})]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 sm:p-6 animate-fade-in",children:e.jsxs(f,{className:"w-full max-w-lg sm:max-w-2xl bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-gray-900 tracking-tight sticky top-0 bg-white z-10",children:"Order Details"}),e.jsxs("div",{className:"space-y-4 text-sm sm:text-base text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"ID:"})," ",t.id]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"User Name:"})," ",t.user_name]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"User Email:"})," ",t.user_email]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"User Phone:"})," ",t.user_phone]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"User Address:"})," ",t.user_address]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"User City:"})," ",t.user_city]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"User Zip:"})," ",t.user_zip]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"Order Date:"})," ",i(t.created_at)," ",j(t.created_at)]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"Delivered Date:"})," ",i(t.delivered_date)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-900",children:"Updated At:"})," ",i(t.updated_at)," ",j(t.updated_at)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{className:"text-gray-900",children:"Total Amount:"}),e.jsx(l,{size:16,className:"mx-2 text-gray-600"}),e.jsx("span",{className:"font-medium",children:t.total_amount})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{className:"text-gray-900",children:"Paid Payment:"}),e.jsx(l,{size:16,className:"mx-2 text-gray-600"}),e.jsx("span",{className:"font-medium",children:t.paid_payment})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{className:"text-gray-900",children:"Pending Payment:"}),e.jsx(l,{size:16,className:"mx-2 text-gray-600"}),e.jsx("span",{className:"font-medium",children:t.pending_payment})]}),e.jsx("p",{children:e.jsx("strong",{className:"text-gray-900",children:"Products:"})}),e.jsx("ul",{className:"list-disc pl-6 space-y-2",children:t.products.map((s,n)=>e.jsxs("li",{className:"text-gray-700",children:[e.jsx("strong",{children:"Name:"})," ",s.product_name,", ",e.jsx("strong",{children:"Qty:"})," ",s.quantity,","," ",e.jsx("strong",{children:"Price:"})," ",e.jsx(l,{size:14,className:"inline text-gray-600"}),s.product_price]},n))}),t.payment_logs&&t.payment_logs.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(B,{onClick:X,className:"mt-6 w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md transition-colors",children:P?"Hide Payment Logs":`See Payment Logs (${t.payment_logs.length})`}),P&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200",children:[e.jsx("p",{className:"text-gray-900 font-semibold mb-3",children:"Payment Logs:"}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("ul",{className:"list-disc pl-6 space-y-3",children:t.payment_logs.map((s,n)=>e.jsxs("li",{className:"text-gray-700 bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Payment ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",e.jsx(l,{size:14,className:"inline text-gray-600"}),e.jsx("span",{className:"font-medium",children:s.payment_amount})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",i(s.created_at)," ",j(s.created_at)]})]},n))})})]})]})]})]}),e.jsx("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex justify-end sticky bottom-0",children:e.jsx(B,{onClick:W,className:"w-full sm:w-auto bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg shadow-md transition-colors",children:"Close"})})]})})]})}function Ce(){const[a,t]=r.useState([]),[c,x]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{const m=await E();console.log(E),t(m),x(!1)}catch(m){console.error("Error fetching orders:",m),x(!1)}})()},[]),e.jsx(ae,{children:e.jsx(Ne,{userorders:a})})}export{Ce as default};
