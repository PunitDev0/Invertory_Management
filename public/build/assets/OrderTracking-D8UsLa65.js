import{j as e,r as o,a as je,y as z}from"./app-CWzDr_cl.js";import{L as ue}from"./Layout-CLBq2CYq.js";import{C as T,a as G}from"./card-ozkBMabZ.js";import{B as V}from"./badge-D7rM-2Tm.js";import{c as p,b as ye,I as x,B as L}from"./index-B0ssIvT4.js";import{T as fe,a as Ne,b as ee,c as j,d as ve,e as u}from"./table-DQLddXVd.js";import{L as d}from"./label-BuewtWwN.js";import{S as be,e as _e,g as we,i as Pe,j as H}from"./select-CZRioBtG.js";import{c as A,S as Ce,U as ke,J as Se}from"./navbar-H6cKIR7p.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Q=A("Calendar",De);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ee=A("ChevronLeft",Oe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ze=A("ChevronRight",Fe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],i=A("IndianRupee",Te),se=({className:m,...c})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:p("mx-auto flex w-full justify-center",m),...c});se.displayName="Pagination";const te=o.forwardRef(({className:m,...c},t)=>e.jsx("ul",{ref:t,className:p("flex flex-row items-center gap-1",m),...c}));te.displayName="PaginationContent";const U=o.forwardRef(({className:m,...c},t)=>e.jsx("li",{ref:t,className:p("",m),...c}));U.displayName="PaginationItem";const I=({className:m,isActive:c,size:t="icon",...y})=>e.jsx("a",{"aria-current":c?"page":void 0,className:p(ye({variant:c?"outline":"ghost",size:t}),m),...y});I.displayName="PaginationLink";const ae=({className:m,...c})=>e.jsxs(I,{"aria-label":"Go to previous page",size:"default",className:p("gap-1 pl-2.5",m),...c,children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});ae.displayName="PaginationPrevious";const ne=({className:m,...c})=>e.jsxs(I,{"aria-label":"Go to next page",size:"default",className:p("gap-1 pr-2.5",m),...c,children:[e.jsx("span",{children:"Next"}),e.jsx(ze,{className:"h-4 w-4"})]});ne.displayName="PaginationNext";const Le=je.create({baseURL:"",headers:{"Content-Type":"application/json"}});function Ue({userorders:m,onUpdateOrder:c}){var Y;const[t,y]=o.useState(null),[v,b]=o.useState(""),[S,re]=o.useState(""),[_,le]=o.useState("all"),[w,ie]=o.useState(""),[f,de]=o.useState(1),[M,B]=o.useState(!1),[D,O]=o.useState(!1),[n,Z]=o.useState(null),[q,ce]=o.useState([]),E=10;o.useEffect(()=>{(async()=>{try{const a=await Le.get("/expenses");if(a.data.success)ce(a.data.data);else throw new Error(a.data.message||"Failed to fetch expenses")}catch(a){console.error("Error fetching expenses:",a),z.error("Failed to load expenses")}})()},[]);const R=s=>{y(s),Z({...s}),B(!1),O(!1)},xe=()=>{y(null),B(!1),O(!1)},oe=()=>{B(!M)},me=()=>{O(!D)},h=(s,a)=>{Z(r=>{const l={...r,[s]:a};if(s==="total_amount"||s==="paid_payment"){const C=parseFloat(l.total_amount)||0,k=parseFloat(l.paid_payment)||0;l.pending_payment=(C-k).toFixed(2)}return l})},he=async()=>{var s,a;try{const r={user_email:n.user_email,user_phone:n.user_phone,user_address:n.user_address,user_city:n.user_city,user_zip:n.user_zip,billing_number:n.billing_number,created_at:n.created_at,shipping_address:n.shipping_address,delivered_date:n.delivered_date||null,pickup_time:n.pickup_time||null,total_amount:parseFloat(n.total_amount),paid_payment:parseFloat(n.paid_payment),pending_payment:parseFloat(n.pending_payment)},l=await ke(n.id,r);if(l)c&&c(l.data),y(l.data),O(!1),z.success("Order updated successfully"),window.location.reload();else throw new Error(l.message||"Failed to update order")}catch(r){if(console.error("Error in handleSaveChanges:",r),(a=(s=r.response)==null?void 0:s.data)!=null&&a.errors){const l=Object.values(r.response.data.errors).flat().join(`
`);z.error(`Validation failed:
${l}`)}else z.error(`Failed to update order: ${r.message}`)}},g=s=>s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",N=s=>s?new Date(s).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"",F=s=>q.filter(r=>r.order_id.toString()===s.toString()).reduce((r,l)=>Array.isArray(l.expenses)?r+l.expenses.reduce((C,k)=>C+parseFloat(k.amount||0),0):r,0).toFixed(2),J=s=>q.filter(a=>a.order_id.toString()===s.toString()),P=o.useMemo(()=>m.slice().sort((s,a)=>new Date(a.created_at)-new Date(s.created_at)).filter(s=>{const a=new Date(s.created_at),r=v?new Date(v):null,l=S?new Date(S):null,C=(!r||a>=r)&&(!l||a<=l),k=_==="all"||_==="pending"&&s.pending_payment!=="0.00"||_==="paid"&&s.pending_payment==="0.00",pe=w===""||s.id.toString().includes(w)||s.user_name.toLowerCase().includes(w.toLowerCase());return C&&k&&pe}),[m,v,S,_,w]),K=P.slice(0,9),W=f*E,ge=W-E,X=P.slice(ge,W),$=s=>de(s);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 flex flex-col items-center bg-gradient-to-b from-gray-100 to-gray-200 min-h-screen",children:[e.jsx(T,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white mb-8 transform transition-all hover:scale-[1.01]",children:e.jsxs(G,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-gray-900 tracking-tight",children:"Filter Orders"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"startDate",className:"text-sm font-medium text-gray-700",children:"Start Date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(x,{id:"startDate",type:"date",value:v,onChange:s=>b(s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(Q,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"endDate",className:"text-sm font-medium text-gray-700",children:"End Date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(x,{id:"endDate",type:"date",value:S,onChange:s=>re(s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(Q,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(be,{onValueChange:le,value:_,className:"mt-1",children:[e.jsx(_e,{id:"status",className:"w-full border-gray-300 rounded-lg shadow-sm",children:e.jsx(we,{placeholder:"Select status"})}),e.jsxs(Pe,{children:[e.jsx(H,{value:"all",children:"All"}),e.jsx(H,{value:"pending",children:"Pending"}),e.jsx(H,{value:"paid",children:"Paid"})]})]})]}),e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx(d,{htmlFor:"search",className:"text-sm font-medium text-gray-700",children:"Search"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(x,{id:"search",type:"text",placeholder:"Search by Order ID or User Name",value:w,onChange:s=>ie(s.target.value),className:"w-full pl-10 border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(Ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]})]})]})}),e.jsx(T,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white mb-8 transform transition-all hover:scale-[1.01]",children:e.jsxs(G,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-center text-gray-900 tracking-tight",children:"Recent Orders (Top 9)"}),K.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No orders found"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(s=>e.jsxs("div",{className:"cursor-pointer p-5 border border-gray-200 rounded-xl bg-white shadow-md hover:shadow-lg hover:bg-gray-50 transition-all duration-300",onClick:()=>R(s),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",s.user_name]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Ordered: ",g(s.created_at)," ",N(s.created_at)]}),s.delivered_date&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Delivered: ",g(s.delivered_date)]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Booking:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(i,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.total_amount})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(i,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.paid_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(i,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.pending_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Total Expenses:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(i,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:F(s.id)})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(V,{className:p("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]})]},s.id))})]})}),e.jsx(T,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white transform transition-all hover:scale-[1.01]",children:e.jsxs(G,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-center text-gray-900 tracking-tight",children:"All User Orders"}),P.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No orders found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:hidden grid grid-cols-1 gap-6",children:X.map(s=>e.jsxs("div",{className:"cursor-pointer p-5 border border-gray-200 rounded-xl bg-white shadow-md hover:shadow-lg hover:bg-gray-50 transition-all duration-300",onClick:()=>R(s),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",s.user_name]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Ordered: ",g(s.created_at)," ",N(s.created_at)]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Delivered: ",g(s.delivered_date)||"N/A"]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Booking:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(i,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.total_amount})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(i,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.paid_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(i,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.pending_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Total Expenses:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(i,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:F(s.id)})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(V,{className:p("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]})]},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs(fe,{className:"min-w-full",children:[e.jsx(Ne,{children:e.jsxs(ee,{className:"bg-gray-100",children:[e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Order ID"}),e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"User"}),e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Order Date"}),e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Delivered Date"}),e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Total"}),e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Paid"}),e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Pending"}),e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Expenses"}),e.jsx(j,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Status"})]})}),e.jsx(ve,{children:X.map(s=>e.jsxs(ee,{className:"cursor-pointer hover:bg-gray-50 transition-colors text-xs sm:text-sm border-b",onClick:()=>R(s),children:[e.jsx(u,{className:"font-medium",children:s.id}),e.jsx(u,{children:s.user_name}),e.jsxs(u,{children:[g(s.created_at)," ",N(s.created_at)]}),e.jsx(u,{children:g(s.delivered_date)||"N/A"}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{size:14,className:"text-gray-600"}),s.total_amount]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{size:14,className:"text-gray-600"}),s.paid_payment]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{size:14,className:"text-gray-600"}),s.pending_payment]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{size:14,className:"text-gray-600"}),F(s.id)]})}),e.jsx(u,{children:e.jsx(V,{className:p("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]},s.id))})]})}),e.jsx(se,{className:"mt-6",children:e.jsxs(te,{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(U,{children:e.jsx(ae,{onClick:()=>$(f-1),disabled:f===1,className:"hover:bg-gray-200 rounded-lg"})}),Array.from({length:Math.ceil(P.length/E)},(s,a)=>e.jsx(U,{children:e.jsx(I,{onClick:()=>$(a+1),isActive:f===a+1,className:p("px-3 py-1 rounded-lg",f===a+1?"bg-blue-500 text-white":"hover:bg-gray-200"),children:a+1})},a+1)),e.jsx(U,{children:e.jsx(ne,{onClick:()=>$(f+1),disabled:f===Math.ceil(P.length/E),className:"hover:bg-gray-200 rounded-lg"})})]})})]})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 sm:p-6 animate-fade-in",children:e.jsxs(T,{className:"w-full max-w-lg sm:max-w-2xl bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-white z-10 pb-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold text-gray-900 tracking-tight",children:"Order Details"}),e.jsx(L,{onClick:me,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md",children:D?"Cancel Edit":"Edit Order"})]}),e.jsxs("div",{className:"space-y-4 text-sm sm:text-base text-gray-700",children:[D?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(d,{children:"ID:"}),e.jsx(x,{value:n.id,disabled:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Billing Number:"}),e.jsx(x,{value:n.billing_number||"",onChange:s=>h("billing_number",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Name:"}),e.jsx(x,{value:n.user_name,disabled:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Order Date:"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(x,{type:"datetime-local",value:n.created_at?new Date(n.created_at).toISOString().slice(0,16):"",onChange:s=>h("created_at",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm"}),e.jsx(Q,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Email:"}),e.jsx(x,{value:n.user_email,onChange:s=>h("user_email",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Phone:"}),e.jsx(x,{value:n.user_phone,onChange:s=>h("user_phone",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Address:"}),e.jsx(x,{value:n.user_address,onChange:s=>h("user_address",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User City:"}),e.jsx(x,{value:n.user_city,onChange:s=>h("user_city",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Zip:"}),e.jsx(x,{value:n.user_zip,onChange:s=>h("user_zip",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"User Zip:"}),e.jsx(x,{value:n.shipping_address,onChange:s=>h("shipping_address",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Delivered Date:"}),e.jsx(x,{type:"date",value:((Y=n.delivered_date)==null?void 0:Y.split("T")[0])||"",onChange:s=>h("delivered_date",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Total Amount:"}),e.jsx(x,{type:"number",step:"0.01",value:n.total_amount,onChange:s=>h("total_amount",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Paid Payment:"}),e.jsx(x,{type:"number",step:"0.01",value:n.paid_payment,onChange:s=>h("paid_payment",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Pending Payment:"}),e.jsx(x,{type:"number",step:"0.01",value:n.pending_payment,disabled:!0,className:"mt-1 bg-gray-100 cursor-not-allowed"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," ",t.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Billing No:"})," ",t.billing_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Name:"})," ",t.user_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Order Date:"})," ",g(t.created_at)," ",N(t.created_at)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Email:"})," ",t.user_email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Phone:"})," ",t.user_phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Address:"})," ",t.user_address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User City:"})," ",t.user_city]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Zip:"})," ",t.user_zip]}),e.jsxs("p",{className:"text-cyan-700",children:[e.jsx("strong",{children:"Shipping Add:"})," ",t.shipping_address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Delivered Date:"})," ",t.delivered_date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pickup Date:"})," ",t.pickup_time||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Updated At:"})," ",g(t.updated_at)," ",N(t.updated_at)]}),e.jsxs("div",{className:"flex items-center text-yellow-600 font-bold",children:[e.jsx("strong",{children:"Total Amount:"}),e.jsx(i,{size:16,className:"mx-2"}),e.jsx("span",{children:t.total_amount})]}),e.jsxs("div",{className:"flex items-center text-green-400 font-bold",children:[e.jsx("strong",{children:"Paid Payment:"}),e.jsx(i,{size:16,className:"mx-2"}),e.jsx("span",{children:t.paid_payment})]}),e.jsxs("div",{className:"flex items-center text-red-400 font-bold",children:[e.jsx("strong",{children:"Pending Payment:"}),e.jsx(i,{size:16,className:"mx-2"}),e.jsx("span",{children:t.pending_payment})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{children:"Total Expenses:"}),e.jsx(i,{size:16,className:"mx-2"}),e.jsx("span",{children:F(t.id)})]}),e.jsx("p",{children:e.jsx("strong",{children:"Products:"})}),e.jsx("ul",{className:"list-disc pl-6 space-y-2",children:t.products.map((s,a)=>e.jsxs("li",{children:[e.jsx("strong",{children:"Name:"})," ",s.product_name,", ",e.jsx("strong",{children:"Qty:"})," ",s.quantity,","," ",e.jsx("strong",{children:"Price:"})," ",e.jsx(i,{size:14,className:"inline"}),s.product_price]},a))}),J(t.id).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold mt-4",children:"Expenses:"}),e.jsx("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200",children:e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("ul",{className:"list-disc pl-6 space-y-3",children:J(t.id).map((s,a)=>s.expenses.map((r,l)=>e.jsxs("li",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",r.type||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",e.jsx(i,{size:14,className:"inline"}),e.jsx("span",{children:parseFloat(r.amount||0).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",g(s.expense_date)||"N/A"]})]},`${a}-${l}`)))})})})]})]}),t.payment_logs&&t.payment_logs.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(L,{onClick:oe,className:"mt-6 w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md",children:M?"Hide Payment Logs":`See Payment Logs (${t.payment_logs.length})`}),M&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200",children:[e.jsx("p",{className:"font-semibold mb-3",children:"Payment Logs:"}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("ul",{className:"list-disc pl-6 space-y-3",children:t.payment_logs.map((s,a)=>e.jsxs("li",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Payment ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",e.jsx(i,{size:14,className:"inline"}),e.jsx("span",{children:s.payment_amount})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",g(s.created_at)," ",N(s.created_at)]})]},a))})})]})]})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex justify-end sticky bottom-0 gap-2",children:[D&&e.jsx(L,{onClick:he,className:"bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md",children:"Save Changes"}),e.jsx(L,{onClick:xe,className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg shadow-md",children:"Close"})]})]})})]})}function Qe(){const[m,c]=o.useState([]),[t,y]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{const b=await Se();c(b),y(!1)}catch(b){console.error("Error fetching orders:",b),y(!1)}})()},[]),e.jsx(ue,{children:e.jsx(Ue,{userorders:m})})}export{Qe as default};
