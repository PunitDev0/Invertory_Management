import{j as e,r as d,a as ue,y as E}from"./app-C_pZ1nQ1.js";import{L as pe}from"./Layout-DnisrtJm.js";import{C as z,a as G}from"./card-DHAVHcfW.js";import{B as V}from"./badge-CJlPN_Pp.js";import{c as j,b as ye,I as o,B as F}from"./index-DZzwJbF1.js";import{T as fe,a as Ne,b as ee,c as u,d as ve,e as p}from"./table-BEgHIVR5.js";import{L as x}from"./label-CWUW1b2l.js";import{S as be,e as _e,g as we,i as Pe,j as H}from"./select-CBZuldc7.js";import{c as L,S as Ce,U as Se,J as ke}from"./navbar-qktaDJdR.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Q=L("Calendar",De);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ee=L("ChevronLeft",Oe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Fe=L("ChevronRight",ze);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],l=L("IndianRupee",Te),se=({className:c,...i})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:j("mx-auto flex w-full justify-center",c),...i});se.displayName="Pagination";const te=d.forwardRef(({className:c,...i},a)=>e.jsx("ul",{ref:a,className:j("flex flex-row items-center gap-1",c),...i}));te.displayName="PaginationContent";const T=d.forwardRef(({className:c,...i},a)=>e.jsx("li",{ref:a,className:j("",c),...i}));T.displayName="PaginationItem";const U=({className:c,isActive:i,size:a="icon",...y})=>e.jsx("a",{"aria-current":i?"page":void 0,className:j(ye({variant:i?"outline":"ghost",size:a}),c),...y});U.displayName="PaginationLink";const ae=({className:c,...i})=>e.jsxs(U,{"aria-label":"Go to previous page",size:"default",className:j("gap-1 pl-2.5",c),...i,children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});ae.displayName="PaginationPrevious";const ne=({className:c,...i})=>e.jsxs(U,{"aria-label":"Go to next page",size:"default",className:j("gap-1 pr-2.5",c),...i,children:[e.jsx("span",{children:"Next"}),e.jsx(Fe,{className:"h-4 w-4"})]});ne.displayName="PaginationNext";const Le=ue.create({baseURL:"",headers:{"Content-Type":"application/json"}});function Ue({userorders:c,onUpdateOrder:i}){var Y;const[a,y]=d.useState(null),[v,b]=d.useState(""),[C,re]=d.useState(""),[_,le]=d.useState("all"),[w,ie]=d.useState(""),[f,de]=d.useState(1),[A,I]=d.useState(!1),[S,k]=d.useState(!1),[n,q]=d.useState(null),[Z,ce]=d.useState([]),D=10;d.useEffect(()=>{(async()=>{try{const t=await Le.get("/expenses");if(t.data.success)ce(t.data.data);else throw new Error(t.data.message||"Failed to fetch expenses")}catch(t){console.error("Error fetching expenses:",t),E.error("Failed to load expenses")}})()},[]);const M=s=>{y(s),q({...s}),I(!1),k(!1)},xe=()=>{y(null),I(!1),k(!1)},oe=()=>{I(!A)},me=()=>{k(!S)},g=(s,t)=>{q(r=>({...r,[s]:t}))},he=async()=>{var s,t;try{const r={user_email:n.user_email,user_phone:n.user_phone,user_address:n.user_address,user_city:n.user_city,user_zip:n.user_zip,created_at:n.created_at,delivered_date:n.delivered_date||null,total_amount:parseFloat(n.total_amount),paid_payment:parseFloat(n.paid_payment),pending_payment:parseFloat(n.pending_payment)},m=await Se(n.id,r);if(m)i&&i(m.data),y(m.data),k(!1),E.success("Order updated successfully"),window.location.reload();else throw new Error(m.message||"Failed to update order")}catch(r){if(console.error("Error in handleSaveChanges:",r),(t=(s=r.response)==null?void 0:s.data)!=null&&t.errors){const m=Object.values(r.response.data.errors).flat().join(`
`);E.error(`Validation failed:
${m}`)}else E.error(`Failed to update order: ${r.message}`)}},h=s=>s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",N=s=>s?new Date(s).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"",O=s=>Z.filter(r=>r.order_id.toString()===s.toString()).reduce((r,m)=>Array.isArray(m.expenses)?r+m.expenses.reduce((B,$)=>B+parseFloat($.amount||0),0):r,0).toFixed(2),J=s=>Z.filter(t=>t.order_id.toString()===s.toString()),P=d.useMemo(()=>c.slice().sort((s,t)=>new Date(t.created_at)-new Date(s.created_at)).filter(s=>{const t=new Date(s.created_at),r=v?new Date(v):null,m=C?new Date(C):null,B=(!r||t>=r)&&(!m||t<=m),$=_==="all"||_==="pending"&&s.pending_payment!=="0.00"||_==="paid"&&s.pending_payment==="0.00",je=w===""||s.id.toString().includes(w)||s.user_name.toLowerCase().includes(w.toLowerCase());return B&&$&&je}),[c,v,C,_,w]),K=P.slice(0,9),W=f*D,ge=W-D,X=P.slice(ge,W),R=s=>de(s);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 flex flex-col items-center bg-gradient-to-b from-gray-100 to-gray-200 min-h-screen",children:[e.jsx(z,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white mb-8 transform transition-all hover:scale-[1.01]",children:e.jsxs(G,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-gray-900 tracking-tight",children:"Filter Orders"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"startDate",className:"text-sm font-medium text-gray-700",children:"Start Date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(o,{id:"startDate",type:"date",value:v,onChange:s=>b(s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(Q,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"endDate",className:"text-sm font-medium text-gray-700",children:"End Date"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(o,{id:"endDate",type:"date",value:C,onChange:s=>re(s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(Q,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(be,{onValueChange:le,value:_,className:"mt-1",children:[e.jsx(_e,{id:"status",className:"w-full border-gray-300 rounded-lg shadow-sm",children:e.jsx(we,{placeholder:"Select status"})}),e.jsxs(Pe,{children:[e.jsx(H,{value:"all",children:"All"}),e.jsx(H,{value:"pending",children:"Pending"}),e.jsx(H,{value:"paid",children:"Paid"})]})]})]}),e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx(x,{htmlFor:"search",className:"text-sm font-medium text-gray-700",children:"Search"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(o,{id:"search",type:"text",placeholder:"Search by Order ID or User Name",value:w,onChange:s=>ie(s.target.value),className:"w-full pl-10 border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"}),e.jsx(Ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]})]})]})}),e.jsx(z,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white mb-8 transform transition-all hover:scale-[1.01]",children:e.jsxs(G,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-center text-gray-900 tracking-tight",children:"Recent Orders (Top 9)"}),K.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No orders found"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(s=>e.jsxs("div",{className:"cursor-pointer p-5 border border-gray-200 rounded-xl bg-white shadow-md hover:shadow-lg hover:bg-gray-50 transition-all duration-300",onClick:()=>M(s),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",s.user_name]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Ordered: ",h(s.created_at)," ",N(s.created_at)]}),s.delivered_date&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Delivered: ",h(s.delivered_date)]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Booking:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.total_amount})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.paid_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.pending_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Total Expenses:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:O(s.id)})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(V,{className:j("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]})]},s.id))})]})}),e.jsx(z,{className:"w-full max-w-5xl shadow-2xl rounded-2xl bg-white transform transition-all hover:scale-[1.01]",children:e.jsxs(G,{className:"p-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold mb-6 text-center text-gray-900 tracking-tight",children:"All User Orders"}),P.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg",children:"No orders found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:hidden grid grid-cols-1 gap-6",children:X.map(s=>e.jsxs("div",{className:"cursor-pointer p-5 border border-gray-200 rounded-xl bg-white shadow-md hover:shadow-lg hover:bg-gray-50 transition-all duration-300",onClick:()=>M(s),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Order #",s.id]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",s.user_name]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Ordered: ",h(s.created_at)," ",N(s.created_at)]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Delivered: ",h(s.delivered_date)||"N/A"]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Booking:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.total_amount})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.paid_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:s.pending_payment})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{children:"Total Expenses:"}),e.jsxs("div",{className:"flex items-center font-medium",children:[e.jsx(l,{size:14,className:"mr-1 text-gray-600"}),e.jsx("span",{children:O(s.id)})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(V,{className:j("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]})]},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs(fe,{className:"min-w-full",children:[e.jsx(Ne,{children:e.jsxs(ee,{className:"bg-gray-100",children:[e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Order ID"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"User"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Order Date"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Delivered Date"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Total"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Paid"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Pending"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Expenses"}),e.jsx(u,{className:"text-xs sm:text-sm font-semibold text-gray-800",children:"Status"})]})}),e.jsx(ve,{children:X.map(s=>e.jsxs(ee,{className:"cursor-pointer hover:bg-gray-50 transition-colors text-xs sm:text-sm border-b",onClick:()=>M(s),children:[e.jsx(p,{className:"font-medium",children:s.id}),e.jsx(p,{children:s.user_name}),e.jsxs(p,{children:[h(s.created_at)," ",N(s.created_at)]}),e.jsx(p,{children:h(s.delivered_date)||"N/A"}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{size:14,className:"text-gray-600"}),s.total_amount]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{size:14,className:"text-gray-600"}),s.paid_payment]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{size:14,className:"text-gray-600"}),s.pending_payment]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{size:14,className:"text-gray-600"}),O(s.id)]})}),e.jsx(p,{children:e.jsx(V,{className:j("px-3 py-1 text-xs font-semibold text-white rounded-full shadow-sm",s.pending_payment!=="0.00"?"bg-red-600":"bg-green-600"),children:s.pending_payment!=="0.00"?"Pending":"Paid"})})]},s.id))})]})}),e.jsx(se,{className:"mt-6",children:e.jsxs(te,{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(T,{children:e.jsx(ae,{onClick:()=>R(f-1),disabled:f===1,className:"hover:bg-gray-200 rounded-lg"})}),Array.from({length:Math.ceil(P.length/D)},(s,t)=>e.jsx(T,{children:e.jsx(U,{onClick:()=>R(t+1),isActive:f===t+1,className:j("px-3 py-1 rounded-lg",f===t+1?"bg-blue-500 text-white":"hover:bg-gray-200"),children:t+1})},t+1)),e.jsx(T,{children:e.jsx(ne,{onClick:()=>R(f+1),disabled:f===Math.ceil(P.length/D),className:"hover:bg-gray-200 rounded-lg"})})]})})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 sm:p-6 animate-fade-in",children:e.jsxs(z,{className:"w-full max-w-lg sm:max-w-2xl bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center sticky top-0 bg-white z-10 pb-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold text-gray-900 tracking-tight",children:"Order Details"}),e.jsx(F,{onClick:me,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md",children:S?"Cancel Edit":"Edit Order"})]}),e.jsxs("div",{className:"space-y-4 text-sm sm:text-base text-gray-700",children:[S?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(x,{children:"ID:"}),e.jsx(o,{value:n.id,disabled:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"User Name:"}),e.jsx(o,{value:n.user_name,disabled:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Order Date:"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(o,{type:"datetime-local",value:n.created_at?new Date(n.created_at).toISOString().slice(0,16):"",onChange:s=>g("created_at",s.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm"}),e.jsx(Q,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"User Email:"}),e.jsx(o,{value:n.user_email,onChange:s=>g("user_email",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"User Phone:"}),e.jsx(o,{value:n.user_phone,onChange:s=>g("user_phone",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"User Address:"}),e.jsx(o,{value:n.user_address,onChange:s=>g("user_address",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"User City:"}),e.jsx(o,{value:n.user_city,onChange:s=>g("user_city",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"User Zip:"}),e.jsx(o,{value:n.user_zip,onChange:s=>g("user_zip",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Delivered Date:"}),e.jsx(o,{type:"date",value:((Y=n.delivered_date)==null?void 0:Y.split("T")[0])||"",onChange:s=>g("delivered_date",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Total Amount:"}),e.jsx(o,{type:"number",value:n.total_amount,onChange:s=>g("total_amount",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Paid Payment:"}),e.jsx(o,{type:"number",value:n.paid_payment,onChange:s=>g("paid_payment",s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Pending Payment:"}),e.jsx(o,{type:"number",value:n.pending_payment,onChange:s=>g("pending_payment",s.target.value),className:"mt-1"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",a.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Name:"})," ",a.user_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Order Date:"})," ",h(a.created_at)," ",N(a.created_at)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Email:"})," ",a.user_email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Phone:"})," ",a.user_phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Address:"})," ",a.user_address]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User City:"})," ",a.user_city]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Zip:"})," ",a.user_zip]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Delivered Date:"})," ",h(a.delivered_date)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Updated At:"})," ",h(a.updated_at)," ",N(a.updated_at)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{children:"Total Amount:"}),e.jsx(l,{size:16,className:"mx-2"}),e.jsx("span",{children:a.total_amount})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{children:"Paid Payment:"}),e.jsx(l,{size:16,className:"mx-2"}),e.jsx("span",{children:a.paid_payment})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{children:"Pending Payment:"}),e.jsx(l,{size:16,className:"mx-2"}),e.jsx("span",{children:a.pending_payment})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{children:"Total Expenses:"}),e.jsx(l,{size:16,className:"mx-2"}),e.jsx("span",{children:O(a.id)})]}),e.jsx("p",{children:e.jsx("strong",{children:"Products:"})}),e.jsx("ul",{className:"list-disc pl-6 space-y-2",children:a.products.map((s,t)=>e.jsxs("li",{children:[e.jsx("strong",{children:"Name:"})," ",s.product_name,", ",e.jsx("strong",{children:"Qty:"})," ",s.quantity,","," ",e.jsx("strong",{children:"Price:"})," ",e.jsx(l,{size:14,className:"inline"}),s.product_price]},t))}),J(a.id).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold mt-4",children:"Expenses:"}),e.jsx("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200",children:e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("ul",{className:"list-disc pl-6 space-y-3",children:J(a.id).map((s,t)=>s.expenses.map((r,m)=>e.jsxs("li",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",r.type||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",e.jsx(l,{size:14,className:"inline"}),e.jsx("span",{children:parseFloat(r.amount||0).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",h(s.expense_date)||"N/A"]})]},`${t}-${m}`)))})})})]})]}),a.payment_logs&&a.payment_logs.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(F,{onClick:oe,className:"mt-6 w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md",children:A?"Hide Payment Logs":`See Payment Logs (${a.payment_logs.length})`}),A&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200",children:[e.jsx("p",{className:"font-semibold mb-3",children:"Payment Logs:"}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("ul",{className:"list-disc pl-6 space-y-3",children:a.payment_logs.map((s,t)=>e.jsxs("li",{className:"bg-white p-3 rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Payment ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",e.jsx(l,{size:14,className:"inline"}),e.jsx("span",{children:s.payment_amount})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",h(s.created_at)," ",N(s.created_at)]})]},t))})})]})]})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex justify-end sticky bottom-0 gap-2",children:[S&&e.jsx(F,{onClick:he,className:"bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md",children:"Save Changes"}),e.jsx(F,{onClick:xe,className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg shadow-md",children:"Close"})]})]})})]})}function Qe(){const[c,i]=d.useState([]),[a,y]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{const b=await ke();i(b),y(!1)}catch(b){console.error("Error fetching orders:",b),y(!1)}})()},[]),e.jsx(pe,{children:e.jsx(Ue,{userorders:c})})}export{Qe as default};
